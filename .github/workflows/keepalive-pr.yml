name: Keepalive PR

on:
  schedule:
    - cron: "0 15 * * 0" # í•œêµ­ ê¸°ì¤€ ì¼ìš”ì¼ ì˜¤ì „ 9ì‹œ
  workflow_dispatch:

jobs:
  create-keepalive-pr:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Set Git Identity
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"

      - name: Create keepalive file & commit
        run: |
          BRANCH="keepalive-$(date +%Y%m%d)"
          git checkout -b "$BRANCH"
          
          # ë³€ê²½ ì‚¬í•­ ë§Œë“¤ê¸°
          echo "// keepalive ping $(date)" >> .keepalive.txt

          git add .keepalive.txt
          git commit -m "chore: keepalive ping"
          git push origin "$BRANCH"

      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v6
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          title: "chore: Keepalive PR"
          body: "ğŸ”„ ìë™ ìƒì„±ëœ PRì…ë‹ˆë‹¤. ì›Œí¬í”Œë¡œìš° ë§Œë£Œ ë°©ì§€ë¥¼ ìœ„í•œ keepalive pingì…ë‹ˆë‹¤."
          base: main
          branch: keepalive-${{ steps.date.outputs.date }}