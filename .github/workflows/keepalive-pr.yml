name: Keepalive PR

on:
  schedule:
    - cron: "0 15 * * 0" # í•œêµ­ ê¸°ì¤€ ì¼ìš”ì¼ ì˜¤ì „ 9ì‹œ
  workflow_dispatch:

jobs:
  create-keepalive-pr:
    runs-on: ubuntu-latest
    permissions:
      contents: write
      pull-requests: write

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Get current date
        id: date
        run: echo "date=$(date +%Y%m%d)" >> "$GITHUB_OUTPUT"

      - name: Create keepalive file
        run: echo "// keepalive ping $(date)" > .keepalive.txt

      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v6
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          title: "chore: Keepalive PR"
          body: "ğŸ”„ ìë™ ìƒì„±ëœ PRì…ë‹ˆë‹¤. ì›Œí¬í”Œë¡œìš° ë§Œë£Œ ë°©ì§€ë¥¼ ìœ„í•œ keepalive pingì…ë‹ˆë‹¤."
          base: main
          branch: keepalive-${{ steps.date.outputs.date }}
          commit-message: "chore: keepalive ping"
          add-paths: .keepalive.txt